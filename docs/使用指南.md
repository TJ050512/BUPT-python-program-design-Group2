# 北京邮电大学本科教学管理系统 - 使用指南

## 📖 系统简介

这是一个专为北京邮电大学设计的本科教学管理系统，提供完善的教学管理功能，包括学生选课、成绩管理、数据分析等核心功能。

## 🚀 快速开始

### 1. 环境准备

确保已安装 Python 3.8 或更高版本。

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 启动系统

**默认学期（2024-2025-2）：**
```bash
python main.py
```

**指定学期：**
```bash
# 查看2024-2025学年第一学期
python main.py 2024-2025-1

# 查看2024-2025学年第二学期
python main.py 2024-2025-2
```

**说明：**
- 学期格式：`YYYY-YYYY-N`（如：2024-2025-1 表示2024-2025学年第一学期）
- 系统会根据指定的学期过滤显示"我的课程"和"我的课表"
- 未指定学期时，默认使用 `2024-2025-2`

## 👤 默认账号

系统已内置演示数据，可直接使用以下账号登录：

### 教师账号（管理员权限）

| 工号 | 密码 | 姓名 | 职称 |
|------|------|------|------|
| teacher001 | teacher123 | 张教授 | 教授 |
| teacher002 | teacher123 | 李副教授 | 副教授 |

### 学生账号（普通用户权限）

| 学号 | 密码 | 姓名 | 专业 |
|------|------|------|------|
| 2021211001 | student123 | 李明 | 计算机科学与技术 |
| 2021211002 | student123 | 王芳 | 计算机科学与技术 |
| 2021211003 | student123 | 张伟 | 软件工程 |

## 📚 功能说明

### 学生端功能

#### 1. 我的选课
- 查看当前学期已选课程（按命令行参数设置的学期）
- 查看课程详细信息（学分、教师、上课时间等）
- 查看竞价选课状态（投入积分、已录取等）
- 退选课程（双击课程行）
- 查看已选学分统计

#### 2. 课程选课
- 浏览当前学期可选课程（按命令行参数设置的学期）
- 查看课程详细信息和选课人数
- 在线选课（双击课程行）
- 选修课积分竞价（投入1-100积分）
- 系统自动检测时间冲突
- 防止重复选课
- 跨专业选课名额控制

#### 3. 我的成绩
- 查看所有课程成绩
- 查看成绩等级和绩点
- 计算并显示本学期GPA
- 按学期筛选成绩

#### 4. 我的课表
- 查看当前学期课程安排（按命令行参数设置的学期）
- 网格化显示课程时间与地点
- 点击课程查看详细信息
- 自动过滤非当前学期的课程

#### 5. 个人信息
- 查看学号、姓名、专业等个人信息
- 修改密码（开发中）

### 教师端功能

#### 1. 我的课程
- 查看当前学期所有授课课程（按命令行参数设置的学期）
- 查看每门课程的选课人数
- 快速进入成绩录入和学生名单
- 选修课竞价管理（查看投入、手动录取学生）

#### 2. 成绩录入
- 选择课程进行成绩录入
- 查看学生名单和已录入成绩
- 双击学生行录入或修改成绩
- 系统自动计算等级和绩点
- 支持成绩修改

#### 3. 学生名单
- 查看各门课程的选课学生
- 显示学生详细信息（学号、姓名、专业、班级）
- 导出学生名单（开发中）

#### 4. 数据分析
- 选择课程查看成绩统计
- 统计信息：
  - 总人数、平均分、最高分、最低分、及格率
- 可视化图表：
  - 成绩分布柱状图（优秀、良好、中等、及格、不及格）
  - 成绩比例饼图
- 实时更新统计数据

#### 5. 个人信息
- 查看工号、姓名、职称、院系等信息

## 🎨 界面特色

### 北邮主题设计
- **主题色**：北邮蓝 (#003087)
- **辅助色**：浅蓝 (#0066CC)
- **风格**：现代化、简洁、专业
- **校标**：顶部显示北邮校标和系统标题

### 用户体验
- 直观的导航菜单
- 双击操作选课和录入成绩
- 实时数据刷新
- 友好的提示信息
- 确认对话框防止误操作

## 💡 使用技巧

### 学生端技巧

1. **快速选课**
   - 双击课程行即可选课，无需额外点击按钮
   - 系统会自动检查时间冲突和选课人数
   - 选修课需要投入积分（1-100分），教师审核后录取

2. **积分竞价选课**
   - 在"课程选课"页面，选修课显示"投入积分"按钮
   - 投入积分越高，录取优先级越高
   - 可在"我的选课"查看竞价状态（待处理/已录取/已拒绝）

3. **查看GPA**
   - 在"我的成绩"页面顶部会显示本学期GPA
   - GPA采用4.0制计算

4. **退课操作**
   - 在"我的选课"页面双击要退选的课程
   - 已录入成绩的课程不可退选
   - 竞价选课录取后可以正常退课

5. **学期切换**
   - 使用 `python main.py 2024-2025-1` 查看不同学期的课程
   - "我的课程"和"我的课表"会自动过滤到指定学期

### 教师端技巧

1. **批量录入成绩**
   - 在"成绩录入"页面，逐行双击学生录入成绩
   - 系统自动保存并计算等级绩点

2. **选修课竞价管理**
   - 在"选课管理"页面查看选修课的积分投入情况
   - 按积分从高到低排序，手动选择录取学生
   - 录取后学生自动选课成功，积分扣除

3. **查看统计分析**
   - 在"数据分析"页面可查看成绩分布
   - 图表实时更新，直观展示班级情况

4. **快速定位学生**
   - 在学生名单中可按学号、姓名快速查找
   - 支持导出学生名单（Excel格式，开发中）

5. **学期管理**
   - 系统会根据命令行参数设置的学期显示课程
   - 不同学期的课程数据互不干扰

## 📊 成绩等级说明

系统采用百分制与等级制结合的方式：

| 分数区间 | 等级 | 绩点 |
|---------|------|------|
| 90-100 | A | 4.0 |
| 85-89 | A- | 3.7 |
| 82-84 | B+ | 3.3 |
| 78-81 | B | 3.0 |
| 75-77 | B- | 2.7 |
| 72-74 | C+ | 2.3 |
| 68-71 | C | 2.0 |
| 64-67 | C- | 1.5 |
| 60-63 | D | 1.0 |
| 0-59 | F | 0.0 |

GPA计算公式：`GPA = Σ(课程绩点 × 课程学分) / Σ课程学分`

## 🔧 系统配置

### 当前学期设置

**方式一：命令行参数（推荐）**
```bash
python main.py 2024-2025-1  # 第一学期
python main.py 2024-2025-2  # 第二学期
```

**方式二：环境变量**
```bash
# Windows
set CURRENT_SEMESTER=2024-2025-1
python main.py

# Linux/macOS
export CURRENT_SEMESTER=2024-2025-1
python main.py
```

**说明：**
- 学期格式：`YYYY-YYYY-N`（如：2024-2025-2 表示2024-2025学年第二学期）
- 系统会根据设置的学期过滤"我的课程"和"我的课表"
- 未设置时，默认使用 `2024-2025-2`

### 数据库位置

- 数据库文件：`data/bupt_teaching.db`
- 采用SQLite数据库，轻量级，无需额外配置

### 日志文件

- 日志位置：`logs/app.log`
- 记录所有系统操作和错误信息

## 📝 数据说明

### 演示数据

系统首次运行会自动初始化演示数据：

**课程数据：**
- CS101 - Python程序设计（3学分，必修）
- CS102 - 数据结构（4学分，必修）
- CS201 - 数据库原理（3学分，必修）
- CS301 - 机器学习（3学分，选修）

**开课计划：**
- 所有课程在2024-2025-2学期开课
- 配置了上课时间和教室
- 设置了选课人数上限

### 数据重置

如需重置数据，删除 `data/bupt_teaching.db` 文件，系统会在下次启动时重新创建。

## ⚠️ 注意事项

1. **选课限制**
   - 不能选择时间冲突的课程
   - 不能重复选择同一门课程
   - 课程满员后无法选课
   - 跨专业选课受名额限制（由数据库触发器控制）
   - 公选课必须安排在晚间时段（19:20-20:55）

2. **退课限制**
   - 已录入成绩的课程不能退课
   - 只能退选状态为"已选"的课程

3. **成绩录入**
   - 成绩范围：0-100分
   - 成绩录入后可以修改
   - 录入成绩后学生端立即可见

4. **数据安全**
   - 系统使用bcrypt加密存储密码
   - 所有操作记录在日志文件中
   - 定期备份数据库文件

## 🐛 常见问题

### 1. 系统无法启动

**解决方法：**
```bash
# 检查Python版本
python --version

# 重新安装依赖
pip install -r requirements.txt --upgrade

# 查看日志
cat logs/app.log
```

### 2. 登录失败

**可能原因：**
- 用户名或密码错误
- 数据库文件损坏

**解决方法：**
- 检查用户名和密码是否正确
- 删除数据库文件重新初始化

### 3. 界面显示异常

**可能原因：**
- customtkinter版本过低
- 系统字体缺失

**解决方法：**
```bash
pip install customtkinter --upgrade
```

### 4. 图表不显示

**可能原因：**
- matplotlib未正确安装
- 缺少中文字体

**解决方法：**
```bash
pip install matplotlib --upgrade
```

### 5. 我的课程/课表显示所有学期的课程

**可能原因：**
- 未通过命令行参数设置学期
- 环境变量未正确设置

**解决方法：**
```bash
# 使用命令行参数指定学期
python main.py 2024-2025-2

# 或设置环境变量
set CURRENT_SEMESTER=2024-2025-2  # Windows
export CURRENT_SEMESTER=2024-2025-2  # Linux/macOS
```

### 6. 教师接受竞价后学生端不显示课程

**解决方法：**
- 确保数据库已运行迁移脚本创建积分竞价相关表
- 检查 enrollment 记录的 semester 字段是否正确设置
- 刷新"我的课程"页面

## 📞 技术支持

如遇到问题，请：
1. 查看日志文件 `logs/app.log`
2. 检查系统环境和依赖版本
3. 联系系统管理员

## 🎓 开发信息

- **项目名称**：北京邮电大学本科教学管理系统
- **课程**：Python程序设计
- **版本**：v1.1.0
- **开发时间**：2025年
- **最新更新**：2025-12-13
  - 支持命令行参数设置当前学期
  - 实现积分竞价选课系统
  - 添加跨专业选课名额控制
  - 完善学期过滤功能

---

**祝使用愉快！** 🎉

